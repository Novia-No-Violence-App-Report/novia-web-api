<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Novia - Admin</title>
    <link rel="stylesheet" href="css/style.css">

    <link rel="icon" type="image/png" href="image/favicon.png"/>
    <!-- bootstrap -->
    <link rel="stylesheet" href="css/bootstrap.css">
</head>

<body>

     <!-- SIDEBAR -->
    <input type="checkbox" id="nav-toggle">
    <div class="sidebar">
        <div class="sidebar-logo">
            <img class="imgLogo" src="image\logo.png" alt="" width="112">
            <img class="imgSymbol" src="image\symbol.png" alt="" width="100">
        </div>
        <div class="sidebar-menu">
            <ul>
                <li>
                    <a href="" class="active">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-grid-1x2-fill" viewBox="0 0 16 16">
                                <path d="M0 1a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V1zm9 0a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1V1zm0 9a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1v-5z"/>
                            </svg>
                            <span>Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="#reports">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-card-heading" viewBox="0 0 16 16">
                                <path d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"/>
                                <path d="M3 8.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zm0-5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5v-1z"/>
                            </svg>
                            <span>Reports</span>
                    </a>
                </li>
                <li>
                    <a href="">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-question-circle-fill" viewBox="0 0 16 16">
                                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.496 6.033h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286a.237.237 0 0 0 .241.247zm2.325 6.443c.61 0 1.029-.394 1.029-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94 0 .533.425.927 1.01.927z"/>
                            </svg>
                            <span>Help</span>
                    </a>
                </li>
                <li>
                    <a href="">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-gear-fill" viewBox="0 0 16 16">
                            <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
                        </svg>
                        <span>Settings</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>


    <!-- MAIN CONTENT -->
    <div class="content">

        <!-- NAVIGATION BAR -->
        <header>
            <h4>
                <label for="nav-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-justify-left" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M2 12.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5z"/>
                    </svg>
                </label>
                Dashboard
            </h4>

            <div class="righticon">
                <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="currentColor" class="bi bi-bell-fill" viewBox="0 0 16 16">
                    <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zm.995-14.901a1 1 0 1 0-1.99 0A5.002 5.002 0 0 0 3 6c0 1.098-.5 6-2 7h14c-1.5-1-2-5.902-2-7 0-2.42-1.72-4.44-4.005-4.901z"/>
                </svg>
                <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">
                    <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
                </svg>
            </div>
        </header>

        <!-- TOTAL REPORTS -->
        <main>
            <div class="cards">
                <div class="mini-card">
                    <div class="desc">
                        <h1 id="count">54</h1>
                        <span>Total Reports from March until now</span>
                    </div>
                    <div>
                        <span>
                            <img class="" src="image\icon1.png" alt="" width="105">
                        </span>
                    </div>
                </div>
                <div class="mini-card">
                    <div class="desc">
                        <h1 id="totalLow">10</h1>
                        <span>Total High Reports</span>
                    </div>
                    <div>
                        <span>
                            <img class="" src="image\icon2.png" alt="" width="105">
                        </span>
                    </div>
                </div>
                <div class="mini-card">
                    <div class="desc">
                        <h1 id="totalHigh">44</h1>
                        <span>Total Low Reports</span>
                    </div>
                    <div>
                        <span>
                            <img class="" src="image\icon3.png" alt="" width="105">
                        </span>
                    </div>
                </div>
            </div>

            <div class="all-grid">
                <div class="reports-grid">

                    <!-- REPORTS TABLE -->

                    <div class="reports" id="reports">
                        <div class="card">
                            <p class="txt">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-house-door-fill" viewBox="0 0 18 18">
                                    <path d="M6.5 14.5v-3.505c0-.245.25-.495.5-.495h2c.25 0 .5.25.5.5v3.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5z"/>
                                </svg>
                                &nbsp&nbsp Admin &nbsp&nbsp > &nbsp&nbsp User Report
                            </p>
                            <div class="card-head">
                                <h4>View User Reports</h4>
                                <!-- <button>See All</button> -->
                            </div>
                            <div class="table-wrapper-scroll-y my-custom-scrollbar">
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table id="adminTable" class="table table-hover table-bordered table-striped">
                                            <thead>
                                                <tr>
                                                    <th scope="col">No</th>
                                                    <th scope="col">Timestamp</th>
                                                    <th scope="col">User ID</th>
                                                    <th scope="col">Importance</th>
                                                    <th scope="col">Report</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <% reports.forEach(function(data, i){ %>
                                                <tr>
                                                    <th><%- i+1 %></th>
                                                    <td><%- data.timestamp %></td>
                                                    <td><%- data.user_id %></td>
                                                    <td><%- data.importance %></td>
                                                    <td><%- data.report %></td>
                                                </tr>
                                                <% }); %>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                </div>
                        </div>
                    </div>

                    <div class="locations" id="reports">
                        <div class="card">
                            <p class="txt">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-house-door-fill" viewBox="0 0 18 18">
                                    <path d="M6.5 14.5v-3.505c0-.245.25-.495.5-.495h2c.25 0 .5.25.5.5v3.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5z"/>
                                </svg>
                                &nbsp&nbsp Admin &nbsp&nbsp > &nbsp&nbsp User Location
                            </p>
                            <div class="card-head">
                                <h4>View User Location</h4>

                            </div>
                            <div class="table-wrapper-scroll-y my-custom-scrollbar">
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table id="adminLoc" class="table table-hover table-bordered table-striped">
                                            <thead>
                                                <tr>
                                                    <th scope="col">No</th>
                                                    <th scope="col">Timestamp</th>
                                                    <th scope="col">User ID</th>
                                                    <th scope="col">Last Location</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <% location.forEach(function(data, i){ %>
                                                <tr id="locs">
                                                    <th><%- i+1 %></th>
                                                    <td><%- data.timestamp %></td>
                                                    <td><%- data.user_id %></td>
                                                    <td><a href=<%- data.last_location %>><%- data.last_location %></a></td>
                                                </tr>
                                                <% }); %>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                    <!-- USERS TABLE -->
                    <div class="users">
                        <div class="card">
                            <div class="card-head">
                                <h5>Users Data</h5>
                                <button id="myBtn" type="button">See All</button>
                            </div>
                            <div class="card-body">
                                <div class="user">
                                      <p id="totalTxt">Total: <span id="userTotal">10</span> users</p>
                                      <div class="container">
                                          <ul id="userList">
                                            <% users.forEach(function(data, i){ %>
                                              <li id="cntNum"><p><span class="userTxt"><%- data.name %></span><br><%- data.email %></p></li>
                                            <% }); %>
                                          </ul>
                                      </div>
                                </div>
                            </div>
                        </div>
                    </div>           
                </div>
            
                <div id="myModal" class="modal">
                    <div class="modal-content">
                        <span class="close">&times;</span>
                            
                                <div class="card-head">
                                    <h4>User Data</h4>
                                </div>
                                <div class="table-wrapper-scroll-y my-custom-scrollbar">
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table id="adminLoc" class="table table-hover table-bordered table-striped">
                                            <thead>
                                                <tr>
                                                    <th scope="col">No</th>
                                                    <th scope="col">ID</th>
                                                    <th scope="col">Name</th>
                                                    <th scope="col">Email</th>
                                                    <th scope="col">Phone</th>
                                                    <th scope="col">Address</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <% users.forEach(function(data, i){ %>
                                                <tr id="locs">
                                                    <th><%- i+1 %></th>
                                                    <td><%- data.user_id %></td>
                                                    <td><%- data.name %></td>
                                                    <td><%- data.email %></td>
                                                    <td><%- data.phone %></td>
                                                    <td><%- data.address %></td>
                                                </tr>
                                                <% }); %>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
        </main>
    </div>
    <script src="js/bootstrap.js"></script>
    <script src="js/jquery.js"></script>
</body>

<script>

    // COUNT LOW AND HIGH REPORTS 
    var table = document.getElementById('adminTable'),
        totalReport = (table.rows.length - 1),
        rows = table.getElementsByTagName("tr");
    var count = 0,
        cellNum = 0,
        cell,
        len = rows.length,
        lowCount = 0,
        highCount = 0
    document.getElementById('count').innerHTML = totalReport
    for (var i = 0; i < len; i++) {
        cell = rows[i].cells[3];
        if (cell.innerHTML === 'low') {
            count = lowCount++;
            document.getElementById('totalLow').innerHTML = (count+1)
        } 
        else if (cell.innerHTML === 'high') {
            count = highCount++;
            document.getElementById('totalHigh').innerHTML = (count+1)
        } 
    }


    // COUNT USER TOTAL 
    var ul = document.getElementById('userList')
    var lists = ul.getElementsByTagName('li')
    var userCnt = lists.length
    document.getElementById('userTotal').innerHTML = userCnt

    
    // USER DATA POPUP
    var modal = document.getElementById("myModal");
    var btn = document.getElementById("myBtn");
    var span = document.getElementsByClassName("close")[0];
    btn.onclick = function() {
        modal.style.display = "block";
    }
    span.onclick = function() {
        modal.style.display = "none";
    }
    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }
    
</script>



</html>
